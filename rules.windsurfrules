# ðŸŒ± Nature Marketplace â€“ MVP

A layered, simple-first marketplace platform connecting people with nature-based products (tree adoptions, retreats, natural medicines) while tracking real-world impact and spiritual/ecosystem journeys.

---

## ðŸ§­ Core Principles (NONâ€‘NEGOTIABLE)

1. **Simple over complex** â€“ build the smallest thing that works.
2. **Clear rules** â€“ every layer and module has a single responsibility.
3. **Architecture by layers** â€“ UI â‰  Business â‰  Infrastructure.
4. **SOLID principles** â€“ especially Single Responsibility & Dependency Inversion.
5. **Marketplace mindset** â€“ users, products, payments, lifecycle.
6. **English-first codebase** â€“ translations handled via i18n.
7. **Type safety & standards** â€“ mypy, flake8, PyPI best practices.
8. **No platform lockâ€‘in** â€“ Docker-first, infra-agnostic.

---

## ðŸ§± Architecture Overview (Layered)

```
Cloudflare (DNS, SSL, WAF)
        â†“
Next.js (Presentation & App UI)
        â†“
Django (Business Logic / Domain)
        â†“
Supabase (Postgres, Auth, Storage)
        â†“
Stripe (Payments)
```

Each layer can evolve independently.

---

## ðŸ§© Tech Stack

### Frontend (Presentation Layer)

- **Next.js (App Router)**
- TypeScript
- Tailwind CSS
- i18n (EN default, ES secondary)

### Backend (Domain Layer)

- **Django** (API-first)
- Django REST Framework
- Python 3.11+

### Infrastructure

- **Supabase** â€“ Auth, Postgres, Storage
- **Stripe** â€“ Payments
- **Cloudflare** â€“ DNS, SSL, basic security

### Dev & Quality

- Docker / Docker Compose
- mypy (static typing)
- flake8 (linting)
- black (formatting)
- isort (imports)

---

## ðŸ“‚ Repository Structure

```
root/
â”œâ”€ frontend/              # Next.js app
â”‚  â”œâ”€ app/
â”‚  â”‚  â”œâ”€ (public)/        # SEO pages
â”‚  â”‚  â”œâ”€ (auth)/          # Login / Register
â”‚  â”‚  â”œâ”€ (dashboard)/     # Private user area
â”‚  â”œâ”€ i18n/
â”‚  â””â”€ middleware.ts
â”‚
â”œâ”€ backend/               # Django project
â”‚  â”œâ”€ core/               # Domain logic
â”‚  â”œâ”€ users/
â”‚  â”œâ”€ products/
â”‚  â”œâ”€ orders/
â”‚  â”œâ”€ payments/
â”‚  â””â”€ config/
â”‚
â”œâ”€ docker/
â”œâ”€ docker-compose.yml
â””â”€ README.md
```

---

## ðŸ§  Domainâ€‘Driven Apps (Django)

Each app represents a **business concept**, not a technical concern.

- `users` â€“ profiles, roles (user, NGO, admin)
- `products` â€“ nature products (trees, retreats, medicines)
- `orders` â€“ carts, purchases, states
- `payments` â€“ Stripe integration, webhooks
- `ecosystems` â€“ tree adoption progress, impact tracking

---

## ðŸ”„ User Flow (Marketplace Journey)

### 1. Welcome & Inspiration

**Public Page**

- Magical, natureâ€‘centric welcome
- Spiritual & healing tone
- SEOâ€‘optimized

### 2. Discover Nature's Offerings

**Public Product Discovery**

- Browse nature products
- Categories: Trees, Retreats, Medicines
- Search & filters

### 3. Product Detail View

**Public Product Page**

- Highâ€‘quality imagery
- Healing & spiritual description
- Price & impact explanation

### 4. Cart & Checkout

**Authenticated Flow**

- Review items
- Secure checkout (Stripe)
- Clear, calm UX

### 5. User Profile & Ecosystem Dashboard

**Private Dashboard**

- Order history
- Adopted tree progress (realâ€‘time)
- Impact indicators
- Nature tracks & content

This flow must feel:

> *Easy, happy, chill, fresh, inviting, magical, and deeply connected to nature.*

---

## ðŸ” SEO Strategy (NONâ€‘NEGOTIABLE)

SEO is a **core business requirement**, not an afterthought. The platform must be discoverable by search engines for nature products, impact stories, and ecosystem pages.

### ðŸŽ¯ SEO Goals

- Index all public nature products (trees, retreats, medicines)
- Rank for impactâ€‘driven and natureâ€‘related keywords
- Preserve SEO while the app grows
- Never expose private or sensitive pages

---

### ðŸŒ Public SEO Pages (Next.js)

Located under:

```
app/(public)/
```

These pages **must be serverâ€‘rendered (SSR/SSG)** and indexable.

Examples:

- `/` â€“ Home / Inspiration
- `/products` â€“ Nature marketplace
- `/products/tree/[slug]`
- `/products/retreat/[slug]`
- `/impact`
- `/ngos`

---

### ðŸ§  Metadata Rules

Every public page must define metadata:

```ts
export const metadata = {
  title: "Adopt a Tree | Nature Marketplace",
  description: "Adopt trees, support ecosystems, and track realâ€‘world impact.",
}
```

Rules:

- Unique title per page
- Humanâ€‘readable descriptions
- English default, localized via i18n

---

### ðŸ§¬ Structured Data (Schema.org)

Use JSONâ€‘LD for:

- Products
- Organizations (NGOs)
- Breadcrumbs

Example (Product):

- name
- description
- price
- currency
- image
- impact category

---

### ðŸ—ºï¸ Sitemap & Robots

#### `robots.txt`

```
User-agent: *
Allow: /
Disallow: /dashboard
Disallow: /login
Disallow: /register
```

#### Sitemap

- Autoâ€‘generated from public routes
- Includes product and impact pages

---

### ðŸš« Nonâ€‘Indexable Pages

The following must **never** be indexed:

- Auth pages
- Dashboard
- Checkout
- API routes

Enforced via:

- `robots: { index: false }`
- robots.txt

---

### ðŸ–¼ï¸ Images & Performance

- Use optimized images (WebP where possible)
- Alt text is mandatory for all images
- Lazy loading by default

---

### âš¡ Performance & Core Web Vitals

SEO requires:

- Fast LCP
- Minimal JS on public pages
- Server Components preferred

Avoid:

- Clientâ€‘only rendering for SEO pages
- Blocking scripts

---

### ðŸŒ International SEO

- Default locale: `en`
- Secondary locale: `es`
- Correct `hreflang` tags
- Same content, localized copy

---

### ðŸ“ˆ Measurement

- Google Search Console
- Cloudflare analytics (basic)
- Track impressions, clicks, indexed pages

---

## ðŸ” Public vs Private Pages (Next.js)

- `(public)` â†’ indexable, SEO
- `(auth)` â†’ login / register (no index)
- `(dashboard)` â†’ protected, authenticated

Middleware enforces access rules.

---

## ðŸŒ Internationalization (i18n)

- **Default language:** English
- **Secondary:** Spanish

Frontend:

- `next-intl` or equivalent

Backend:

- Django i18n (`gettext`)

All business logic and code **must be written in English**.

---

## ðŸ§ª Code Quality Rules (Backend)

### Static Typing

```bash
mypy backend/
```

### Linting

```bash
flake8 backend/
```

### Formatting

```bash
black backend/
isort backend/
```

### Rules

- No function without a clear responsibility
- No fat models
- No business logic in views
- Services > utils

---

## ðŸ³ Docker Setup

Everything runs via Docker.

```bash
docker compose up --build
```

Services:

- frontend (Next.js)
- backend (Django)
- nginx (optional)

Supabase & Stripe run externally.

---

## ðŸ”’ Security Baseline (MVP)

- HTTPS via Cloudflare
- Stripe webhook signature verification
- Supabase Row Level Security (RLS)
- Django `DEBUG=False`
- Secrets via environment variables

---

## ðŸš€ MVP Scope (Validation First)

### Included

- User registration
- Product browsing
- Tree adoption purchase
- Payment confirmation
- User dashboard

### Deferred (Later)

- Background jobs (Celery)
- Advanced analytics
- Notifications system
- Mobile app

---

## ðŸ§  Guiding Philosophy

> **Validate the problem before scaling the solution.**

This project favors clarity, calm UX, and realâ€‘world impact over technical vanity.

---

## âœ… Definition of Done (MVP)

- A user can adopt a tree
- A payment is processed
- Progress is visible
- Google can index public pages
- Costs stay minimal

---

ðŸŒ¿ Build with intention. Ship with simplicity. Grow with nature.

---

# ðŸ“˜ Functional Specification â€“ Nature Wellness Marketplace

This section defines **business functionality and user experience requirements**. It complements the architectural rules above and must be respected by all implementations.

---

## 1. Business Requirements

### 1.1 Vision & Value Proposition

- **Concept**: A hybrid marketplace combining:

  - Eâ€‘commerce (organic & wellness products)
  - Wellness tourism (retreats)
  - Climate action (tree adoption)

- **Brand Identity**: **Ecoâ€‘Luxury**

  - Dark, sophisticated UI
  - Forestâ€‘night inspired palette
  - Glassmorphism, blur, soft glows
  - Modern sansâ€‘serif typography

- **Primary KPIs**:

  - Conversion Rate (visitor â†’ buyer/adopter)
  - Retention (users returning to track trees)
  - Ecological Impact (COâ‚‚ offset, trees planted)

---

## 1.2 Functional Modules

### A. Authentication & Gamification

- **Animated Password Growth**

  - 1â€“3 chars â†’ Seed
  - 4â€“7 chars â†’ Sprout
  - 8+ chars â†’ Young Tree

- **Social Login**

  - Google OAuth (initially simulated)

- **User Levels (Green Points)**

  - Seed Planter
  - Earth Guardian
  - Forest Master

---

### B. Catalog & Discovery

- Smart search by category:

  - Trees
  - Retreats
  - Products

- Quick navigation chips (no page reload)

- Featured & New Arrivals (ruleâ€‘based, simulated ranking)

---

### C. Wishlist (Favorites)

- Persisted during session (React Context)
- Instant visual feedback on like
- Empty state CTA â†’ redirect to catalog

---

### D. Tree Tracker (Impact Module)

- Immersive dashboard experience

- Satelliteâ€‘style map with fixed GPS

- Immutable lifecycle timeline:

  - Planted
  - Germinated
  - First Photo
  - Carbon Audit
  - Annual Maintenance

- Certificate download (PDF â€“ simulated)

---

## 1.3 Nonâ€‘Functional Requirements

- **Performance**: FCP < 1.5s
- **Accessibility**: WCAG 2.1 AA
- **Responsiveness**: Mobileâ€‘first
- **Frontend Stack**: React 19, TypeScript, Tailwind

---

## 2. User Journeys

### 2.1 Adoption Flow (Hero Journey)

1. Landing â†’ emotional connection
2. Register â†’ animated password tree
3. Home â†’ featured adoption
4. Details â†’ impact & location
5. Cart â†’ review
6. Checkout â†’ Stripe payment
7. Profile â†’ tree appears in "My Forest"

---

### 2.2 Retention Loop (Monitoring)

1. User returns
2. Opens profile
3. Tracks a tree
4. Views updates, photos, map
5. Shares or downloads certificate

---

## 3. Core Data Models (Reference)

> These schemas guide both frontend typing and backend domain models.

- User & Profile
- Product & Category
- Adoption & Ecosystem
- Cart & Order

(Implementation must align with Supabase + Django models.)

---

## 4. Frontend Architecture (Conceptual)

- **Providers**: Global state (catalog, cart, favorites)
- **Screens**: Routeâ€‘level views
- **UI Components**: Presentational only
- **Routing**: Layoutâ€‘based, roleâ€‘aware

Business logic **never lives in UI components**.

---

## ðŸ“Œ Final Rule

> This document defines **what the product is**. The previous sections define **how it is built**.

Both must remain aligned at all times.




avoid usign this for comments     # ==============================, prefer single coments